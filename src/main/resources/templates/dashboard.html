<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:insert="fragment/head.html :: headerfiles">
    <title>Sanolagani</title>

</head>
<header class='container header__container' th:replace="fragment/header.html :: header"></header>

<div class='full__width' th:insert="fragment/nav.html :: navbar">
</div>

<!-- Dashboard -->
<section class="dashboard">
    <div class=" dashboard__container">
        <div class="left__dashboard board">
            <div>
                <p><a href="#">Sanolagani Dashboard</a></p>
                <p><a href="#">My Information</a></p>
                <div class="dropdown">
                    <button onclick="fundManagement()" class="drop-btn">Fund Management</button>
                    <div id="fundManagement" class="fundManagementContent">
                        <a href="#"><i class="fa-sharp fa-solid fa-arrow-right"></i>&nbsp;Collateral Management</a>
                        <a href="#"><i class="fa-sharp fa-solid fa-arrow-right"></i>&nbsp;Fund Transfer History</a>
                        <a href="#"><i class="fa-sharp fa-solid fa-arrow-right"></i>&nbsp;Fund Settlement</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="center__dashboard board">
            <canvas id="myChart2"></canvas>
        </div>
        <div class="right__dashboard">
            <div class="turnover board">
                <h2>Welcome,[[${user}]]</h2>
                <a th:href="@{/riskinfo}">
                    <div>
                        <p>Total investment</p>
                </a>
                <p>[[${totalInvestment}]]</p>
            </div>
            <div>
                <p>Total company</p>
                <p>[[${size}]]</p>
            </div>
            <div>
                <p>Total share</p>
                <p>[[${totalshare}]]</p>
            </div>

        </div>
    </div>
</section>




<footer th:insert="fragment/footer.html :: footer">

</footer>



<!-- Fund Management Dropdown Script -->
<script input th:inline="javascript">
    function fundManagement() {
        document.getElementById("fundManagement").classList.toggle("show");
    }

    // Extract labels and values from dataPoints		
    //var labels = dataPoints.map(dp => dp.label);
    //var values = dataPoints.map(dp => dp.value);

    document.addEventListener("DOMContentLoaded", function () {
        var canvas = document.getElementById("myChart2");

        if (canvas) {
            var ctx = canvas.getContext("2d");


            var companies = [[${ companynamelist }]]; // Replace with your actual company names
            console.log(companies);
            var shares = [2, 3, 4] // Replace with your actual number of shares data
            var investments = [[${ totalamountlist }]]; // Replace with your additional data

            // Chart data
            var chartData = {
                labels: companies,
                datasets: [
                    {
                        label: "investments",
                        data: investments,
                        type: 'line', // Bar chart for number of shares
                        backgroundColor: "#007bff",
                        borderWidth: 1
                    },

                ]
            };
            // Chart options
            var chartOptions = {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            };

            // Create combination chart
            var myChart = new Chart(ctx, {
                type: 'line',
                data: chartData,
                options: chartOptions
            });

        }

    });

</script>
</body>

</html>